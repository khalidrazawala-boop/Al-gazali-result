<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al Ghazali Academy - Professional Board Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #004d3d;
            --gold: #c5a059;
            --gold-light: #f4e8d1;
        }
        body { font-family: 'Poppins', sans-serif; background: #f0f2f5; color: #1a1a1a; }
        .college-font { font-family: 'Cinzel Decorative', serif; }
        .classic-font { font-family: 'Old Standard TT', serif; }
        
        .marksheet-container {
            background: white;
            border: 20px solid var(--primary);
            border-image: linear-gradient(45deg, var(--primary), #007d63, var(--primary)) 1;
            padding: 50px;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.2);
        }
        .inner-border {
            border: 2px solid var(--gold);
            padding: 20px;
            height: 100%;
            position: relative;
        }
        .watermark {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-35deg);
            font-size: 6rem; opacity: 0.05; font-weight: 900; color: var(--primary); pointer-events: none; z-index: 0; white-space: nowrap;
        }
        .stamp {
            width: 120px; height: 120px; border: 4px double var(--primary); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; text-align: center; font-size: 10px;
            font-weight: bold; color: var(--primary); opacity: 0.6; transform: rotate(-15deg);
        }
        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; margin: 0; }
            .print-area { border: none !important; width: 100%; box-shadow: none !important; }
            .marksheet-container { border: 15px solid var(--primary) !important; padding: 30px; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [page, setPage] = useState('home');
            const [rollSearch, setRollSearch] = useState('');
            const [currentStudent, setCurrentStudent] = useState(null);
            const [adminPin, setAdminPin] = useState('');
            const [isAuthorized, setIsAuthorized] = useState(false);

            // Database Persistence
            const [db, setDb] = useState(() => {
                const saved = localStorage.getItem('GHAZALI_FINAL_DB_V2');
                return saved ? JSON.parse(saved) : {};
            });

            useEffect(() => {
                localStorage.setItem('GHAZALI_FINAL_DB_V2', JSON.stringify(db));
            }, [db]);

            // Form Data
            const [formData, setFormData] = useState({
                roll: '', name: '', father: '', mother: '', age: '', gender: 'Female', class: '',
                s1: 'Quran Kareem', m1: '', s2: 'Hadith Studies', m2: '', s3: 'Islamic Fiqh', m3: '',
                s4: 'Arabic Lang', m4: '', s5: 'Urdu Lit', m5: '', s6: 'English', m6: '',
                center: 'Al Ghazali Main Campus', date: '20-03-2026', time: '10:00 AM'
            });

            // Save Function
            const saveStudent = () => {
                if(!formData.roll || !formData.name) {
                    alert("Roll Number aur Name likhna zaroori hai!");
                    return;
                }
                const updatedDb = { ...db, [formData.roll]: { ...formData } };
                setDb(updatedDb);
                alert("Result saved successfully for Roll No: " + formData.roll);
            };

            // Search Function
            const findStudent = (targetPage) => {
                const found = db[rollSearch];
                if(found) {
                    setCurrentStudent(found);
                    setPage(targetPage);
                } else {
                    alert("Roll Number nahi mila!");
                }
            };

            const calculateResult = (stu) => {
                const marks = [stu.m1, stu.m2, stu.m3, stu.m4, stu.m5, stu.m6].map(m => Number(m) || 0);
                const total = marks.reduce((a, b) => a + b, 0);
                const perc = ((total / 600) * 100).toFixed(2);
                let grade = 'F';
                if(perc >= 80) grade = 'A+';
                else if(perc >= 70) grade = 'A';
                else if(perc >= 60) grade = 'B';
                else if(perc >= 50) grade = 'C';
                else if(perc >= 40) grade = 'D';
                const status = perc >= 33 ? 'PASSED' : 'FAILED';
                return { total, perc, grade, status };
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <nav className="bg-[#004d3d] text-white p-5 flex justify-between items-center shadow-2xl no-print border-b-4 border-[#c5a059]">
                        <div className="flex items-center gap-3 cursor-pointer" onClick={() => setPage('home')}>
                            <div className="bg-white text-[#004d3d] w-10 h-10 rounded-full flex items-center justify-center font-black text-xl shadow-lg">G</div>
                            <h1 className="college-font font-bold text-lg tracking-widest">AL GHAZALI</h1>
                        </div>
                        <button onClick={() => setPage('login')} className="bg-[#c5a059] px-6 py-2 rounded-full font-bold text-xs uppercase shadow-md">Staff Login</button>
                    </nav>

                    {page === 'home' && (
                        <div className="flex-grow flex items-center justify-center p-6">
                            <div className="bg-white p-12 rounded-[2rem] shadow-2xl w-full max-w-md border-b-[12px] border-[#004d3d] text-center">
                                <h2 className="text-2xl font-black mb-6 college-font uppercase">Board Result 2026</h2>
                                <input 
                                    type="text" placeholder="Roll Number" 
                                    className="w-full p-5 border-2 border-gray-100 rounded-2xl mb-8 text-center text-3xl font-bold focus:border-[#c5a059] outline-none"
                                    onChange={(e) => setRollSearch(e.target.value)}
                                />
                                <div className="grid grid-cols-1 gap-4">
                                    <button onClick={() => findStudent('result')} className="bg-[#004d3d] text-white py-4 rounded-2xl font-bold shadow-lg">üìú VIEW MARKSHEET</button>
                                    <button onClick={() => findStudent('admit')} className="bg-stone-800 text-white py-4 rounded-2xl font-bold shadow-lg">üé´ GET ADMIT CARD</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {page === 'result' && currentStudent && (() => {
                        const res = calculateResult(currentStudent);
                        return (
                            <div className="p-4 md:p-12 max-w-6xl mx-auto w-full">
                                <button onClick={() => setPage('home')} className="no-print mb-4 bg-white px-4 py-2 rounded-lg shadow font-bold text-[#004d3d]">‚Üê Back</button>
                                <div className="marksheet-container print-area">
                                    <div className="inner-border">
                                        <div className="watermark">AL GHAZALI</div>
                                        <div className="text-center mb-10 border-b-4 border-double pb-6">
                                            <h2 className="college-font text-4xl text-[#004d3d] font-black uppercase">Al Ghazali Academy</h2>
                                            <p className="tracking-[0.5em] font-bold text-stone-500 text-[10px] uppercase">International Board of Online Islamic Education</p>
                                            <div className="mt-4 bg-[#004d3d] text-white inline-block px-10 py-2 rounded font-bold text-lg">ANNUAL TRANSCRIPT 2026</div>
                                        </div>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 p-6 bg-stone-50 classic-font text-lg border">
                                            <div>Student: <span className="font-bold underline">{currentStudent.name}</span></div>
                                            <div>Roll No: <span className="font-bold underline">{currentStudent.roll}</span></div>
                                            <div>Father: <span className="font-bold underline">{currentStudent.father}</span></div>
                                            <div>Class: <span className="font-bold underline">{currentStudent.class}</span></div>
                                        </div>

                                        <table className="w-full border-collapse mb-8">
                                            <thead>
                                                <tr className="bg-[#004d3d] text-white text-sm uppercase">
                                                    <th className="p-4 text-left border border-white">Subject</th>
                                                    <th className="p-4 border border-white">Max</th>
                                                    <th className="p-4 border border-white">Obtained</th>
                                                </tr>
                                            </thead>
                                            <tbody className="text-center font-bold text-xl classic-font border-2 border-stone-200">
                                                {[1,2,3,4,5,6].map(i => (
                                                    <tr key={i} className="border-b">
                                                        <td className="p-4 text-left px-8">{currentStudent[`s${i}`]}</td>
                                                        <td className="p-4 text-stone-300">100</td>
                                                        <td className="p-4 text-[#004d3d]">{currentStudent[`m${i}`]}</td>
                                                    </tr>
                                                ))}
                                                <tr className="bg-stone-800 text-white font-black">
                                                    <td className="p-4 text-right">TOTAL:</td>
                                                    <td className="p-4">600</td>
                                                    <td className="p-4 text-2xl text-[#c5a059]">{res.total}</td>
                                                </tr>
                                            </tbody>
                                        </table>

                                        <div className="grid grid-cols-3 gap-4 text-center mb-10">
                                            <div className="p-4 bg-stone-50 border-2 border-[#004d3d] rounded-xl">
                                                <p className="text-[10px] font-bold text-gray-400">PERCENTAGE</p>
                                                <h4 className="text-3xl font-black text-[#004d3d]">{res.perc}%</h4>
                                            </div>
                                            <div className="p-4 bg-stone-50 border-2 border-[#004d3d] rounded-xl">
                                                <p className="text-[10px] font-bold text-gray-400">GRADE</p>
                                                <h4 className="text-3xl font-black text-[#004d3d]">{res.grade}</h4>
                                            </div>
                                            <div className="p-4 bg-stone-50 border-2 border-[#004d3d] rounded-xl">
                                                <p className="text-[10px] font-bold text-gray-400">RESULT</p>
                                                <h4 className={`text-3xl font-black ${res.status === 'PASSED' ? 'text-green-700' : 'text-red-700'}`}>{res.status}</h4>
                                            </div>
                                        </div>

                                        <div className="flex justify-between items-end mt-16 no-print">
                                            <div className="stamp">OFFICIAL VERIFIED</div>
                                            <button onClick={() => window.print()} className="bg-[#004d3d] text-white px-8 py-3 rounded-lg font-bold">Download PDF</button>
                                            <div className="text-center border-t-2 border-black w-40">
                                                <p className="text-[10px] font-bold mt-1 uppercase">Controller</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );
                    })()}

                    {page === 'admit' && currentStudent && (
                        <div className="p-6 max-w-2xl mx-auto w-full">
                            <div className="bg-white p-10 border-8 border-double border-stone-200 print-area shadow-xl">
                                <h2 className="college-font text-2xl font-black text-center mb-8 border-b pb-4">EXAM ADMIT CARD 2026</h2>
                                <div className="grid grid-cols-2 gap-6 font-bold uppercase text-xs mb-8">
                                    <div className="border-b pb-2">Name: {currentStudent.name}</div>
                                    <div className="border-b pb-2">Roll: {currentStudent.roll}</div>
                                    <div className="border-b pb-2">Class: {currentStudent.class}</div>
                                    <div className="border-b pb-2">Time: {currentStudent.time}</div>
                                    <div className="col-span-2 border-b pb-2">Center: {currentStudent.center}</div>
                                </div>
                                <button onClick={() => window.print()} className="no-print w-full bg-stone-800 text-white p-3 rounded font-bold">PRINT CARD</button>
                            </div>
                        </div>
                    )}

                    {page === 'login' && (
                        <div className="flex-grow flex items-center justify-center">
                            <div className="bg-white p-10 rounded-3xl shadow-2xl w-full max-w-sm border-t-8 border-[#c5a059] text-center">
                                <h2 className="text-2xl font-black mb-8">ADMIN LOGIN</h2>
                                <input 
                                    type="password" placeholder="PIN" 
                                    className="w-full p-4 border rounded-xl mb-4 text-center text-2xl font-bold"
                                    onChange={(e) => setAdminPin(e.target.value)}
                                />
                                <button onClick={() => { if(adminPin === "1234"){setIsAuthorized(true); setPage('admin');}else{alert("Wrong PIN");} }} className="w-full bg-[#004d3d] text-white p-4 rounded-xl font-bold">LOGIN</button>
                            </div>
                        </div>
                    )}

                    {page === 'admin' && isAuthorized && (
                        <div className="p-6 max-w-5xl mx-auto w-full">
                            <div className="bg-white p-10 rounded-3xl shadow-2xl border-t-8 border-[#004d3d]">
                                <div className="flex justify-between items-center mb-8 border-b pb-4">
                                    <h2 className="text-2xl font-black text-[#004d3d]">ADMIN CONTROLLER</h2>
                                    <button onClick={() => setPage('home')} className="text-red-500 font-bold">Exit</button>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                                    <input type="text" placeholder="Roll No" className="p-3 border rounded-xl" value={formData.roll} onChange={e => setFormData({...formData, roll: e.target.value})} />
                                    <input type="text" placeholder="Full Name" className="p-3 border rounded-xl col-span-2" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />
                                    <input type="text" placeholder="Class" className="p-3 border rounded-xl" value={formData.class} onChange={e => setFormData({...formData, class: e.target.value})} />
                                    <input type="text" placeholder="Father" className="p-3 border rounded-xl col-span-2" value={formData.father} onChange={e => setFormData({...formData, father: e.target.value})} />
                                    <input type="text" placeholder="Exam Center" className="p-3 border rounded-xl col-span-2" value={formData.center} onChange={e => setFormData({...formData, center: e.target.value})} />
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <h3 className="font-bold mb-4">Results (Subjects & Marks)</h3>
                                        {[1,2,3,4,5,6].map(i => (
                                            <div key={i} className="flex gap-2 mb-2">
                                                <input type="text" className="flex-grow p-2 border rounded" value={formData[`s${i}`]} onChange={e => setFormData({...formData, [`s${i}`]: e.target.value})} />
                                                <input type="number" className="w-20 p-2 border rounded" value={formData[`m${i}`]} onChange={e => setFormData({...formData, [`m${i}`]: e.target.value})} />
                                            </div>
                                        ))}
                                    </div>
                                    <div className="bg-stone-50 p-6 rounded-xl border">
                                        <h3 className="font-bold mb-4">Database Operations</h3>
                                        <button onClick={saveStudent} className="w-full bg-[#004d3d] text-[#c5a059] py-4 rounded-xl font-black text-xl mb-4">SAVE RECORD</button>
                                        <div className="text-[10px] text-gray-400">Note: Saving will overwrite existing data for the same roll number.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

